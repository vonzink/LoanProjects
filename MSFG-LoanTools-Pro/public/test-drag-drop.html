<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag & Drop Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #ffffff;
        }
        .drop-zone {
            border: 2px dashed #3b82f6;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            background: #2a2a2a;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .drop-zone.dragover {
            border-color: #10b981;
            background: #1f2937;
        }
        .drop-zone:hover {
            border-color: #60a5fa;
            background: #374151;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #4b5563;
            background: #2a2a2a;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        .btn:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <h1>üîÑ Drag & Drop Test</h1>
    
    <div class="drop-zone" id="dropZone">
        <div style="font-size: 48px; margin-bottom: 20px;">üìÑ</div>
        <h3>Drop PDF Files Here</h3>
        <p>Drag and drop PDF files to test the functionality</p>
        <button class="btn" onclick="selectFile()">Or Click to Browse</button>
    </div>
    
    <div id="result">Ready to test drag and drop...</div>
    
    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <script>
        const dropZone = document.getElementById('dropZone');
        const result = document.getElementById('result');
        
        // Test if PDF.js is loaded
        if (window.pdfjsLib) {
            console.log('‚úÖ PDF.js library loaded successfully');
            result.textContent = '‚úÖ PDF.js library loaded successfully\nReady to test drag and drop...';
        } else {
            console.error('‚ùå PDF.js library not found');
            result.textContent = '‚ùå PDF.js library not found\nPlease check your internet connection.';
        }
        
        // Drag and drop event listeners
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });
        
        dropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
        });
        
        dropZone.addEventListener('drop', async (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            
            const files = Array.from(e.dataTransfer.files);
            const pdfFiles = files.filter(file => file.type === 'application/pdf');
            
            if (pdfFiles.length === 0) {
                result.textContent = '‚ùå Please drop PDF files only.';
                return;
            }
            
            result.textContent = `üìÅ Processing ${pdfFiles.length} PDF file(s)...\n`;
            
            for (const file of pdfFiles) {
                result.textContent += `\nüìÑ File: ${file.name}\n`;
                result.textContent += `üìè Size: ${(file.size / 1024).toFixed(2)} KB\n`;
                
                try {
                    // Test PDF.js functionality
                    if (window.pdfjsLib) {
                        window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
                        
                        const arrayBuffer = await file.arrayBuffer();
                        const pdf = await window.pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                        
                        result.textContent += `‚úÖ PDF loaded successfully!\n`;
                        result.textContent += `üìÑ Pages: ${pdf.numPages}\n`;
                        
                        // Extract text from first page
                        const page = await pdf.getPage(1);
                        const textContent = await page.getTextContent();
                        const pageText = textContent.items.map(item => item.str).join(' ');
                        
                        result.textContent += `üìù First page preview: ${pageText.substring(0, 100)}...\n`;
                    } else {
                        result.textContent += `‚ùå PDF.js library not available\n`;
                    }
                } catch (error) {
                    result.textContent += `‚ùå Error: ${error.message}\n`;
                }
            }
        });
        
        function selectFile() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = '.pdf';
            fileInput.multiple = true;
            
            fileInput.addEventListener('change', async (e) => {
                const files = Array.from(e.target.files);
                const pdfFiles = files.filter(file => file.type === 'application/pdf');
                
                if (pdfFiles.length === 0) {
                    result.textContent = '‚ùå Please select PDF files only.';
                    return;
                }
                
                result.textContent = `üìÅ Processing ${pdfFiles.length} selected PDF file(s)...\n`;
                
                for (const file of pdfFiles) {
                    result.textContent += `\nüìÑ File: ${file.name}\n`;
                    result.textContent += `üìè Size: ${(file.size / 1024).toFixed(2)} KB\n`;
                    
                    try {
                        if (window.pdfjsLib) {
                            window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
                            
                            const arrayBuffer = await file.arrayBuffer();
                            const pdf = await window.pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                            
                            result.textContent += `‚úÖ PDF loaded successfully!\n`;
                            result.textContent += `üìÑ Pages: ${pdf.numPages}\n`;
                        } else {
                            result.textContent += `‚ùå PDF.js library not available\n`;
                        }
                    } catch (error) {
                        result.textContent += `‚ùå Error: ${error.message}\n`;
                    }
                }
            });
            
            fileInput.click();
        }
    </script>
</body>
</html>




